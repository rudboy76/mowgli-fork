/*! mowgli 2016-04-11 */
"use strict";function Alert(a){document.querySelector("#alert header #body").innerHTML="<p>Alert!!</p>";var b=document.querySelector("#alert article");b.innerHTML="<p>"+a+"</p>",document.getElementById("alert").classList.toggle("alert_target")}function Modal(a){var b=document.querySelector(".mwModal .modal-header");b.style.backgroundImage=a.headerImage||'url("images/default-background.jpg")',document.querySelector(".mwModal .modal-header h2").innerHTML=a.headerTitle||"Modal window";var c=document.querySelector(".mwModal .modal-body");c.innerHTML=a.body||"<p>No information</p>",c.style.fontSize=a.fontSize||"1.1em",c.style.fontFamily=a.fontFamily||"Lato",document.querySelector(".mwModal #modal-one").checked=!0}!function(a){a.alert=function(a){document.querySelector(".alert .modal-header h2").innerHTML="MOWGLI: Info",document.querySelector(".alert .modal-body").innerHTML="<p>"+a+"</p>",document.querySelector(".alert #modal-alert").checked=!0},a.structure=void 0}(this.MOWGLI={}),window.onload=function(){new mwGUI.Sample("1zni"),new mwGUI.Sample("3cro"),new mwGUI.Sample("toricSolenoid.png"),new mwGUI.SaveAs("export"),new mwGUI.Fasta("fasta"),new mwGUI.SecStruct("secstruct"),new mwGUI.Phipsi("phipsi"),new mwGUI.FullScreen("fullscreen"),new mwGUI.Camera("camera");console.log("Add event click on About...");new mwGUI.About("about")},function(a){function b(a){this.element=document.getElementById(a),this.handleEvent=function(c){switch(console.log(a),c.type){case"click":new Modal({headerTitle:"About Mowgli...",headerImage:"url('images/headprot.jpg')",body:b.reduce(function(a,b,c,d){return a+b})});break;case"dblclick":}},this.element.addEventListener("click",this,!1),this.element.addEventListener("dblclick",this,!1);var b=["<p>MOWGLI &mdash; <b>MO</b>lecule <b>W</b>eb<b>GL</b> & <b>I</b>mage viewer &mdash; ","is a collaborative project developed by students of the Master of Science in Bioinformatics, Bordeaux ",'during the course "Structural Bioinformatics". </p>',"<p>Maintained and supervised by Jean-Christophe Taveau</a></p>","<h3>Contributors</h3>","<h4>Promotion 2014</h4>","<p>Nullam at enim at nibh mollis feugiat ac nec lorem. Mauris eu ornare erat. Integer facilisis aliquet leo a iaculis. </p>","<h4>Promotion 2015</h4>","<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In lobortis orci vel velit rutrum, a dapibus nisl convallis. ","Nulla quis hendrerit dui. Lorem ipsum dolor sit amet, consectetur adipiscing elit. </p>","<h4>Promotion 2016</h4>","<p>Integer commodo faucibus dui vitae maximus. Nullam at enim at nibh mollis feugiat ac nec lorem. Mauris eu ornare erat. </p>",'<p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>']}a.About=b}(this.mwGUI=this.mwGUI||{}),function(a){function b(a){this.element=document.getElementById(a),this.checkbox=new CheckBox(a),this.handleEvent=function(a){switch(a.type){case"click":var b=a.target.dataset.value;"cam_anaglyph"===b?console.log("cam_anaglyph"):"cam_cross"===b?console.log("cam_cross"):"cam_mono"===b?console.log("cam_mono"):console.log("cam_stereo"),this.checkbox.update(a.target.parentNode,b)}},this.element.addEventListener("click",this,!1)}a.Camera=b}(this.mwGUI=this.mwGUI||{}),function(a){function b(a){this.element=document.getElementById(a),this.handleEvent=function(b){switch(console.log(a),b.type){case"click":var c;if(MOWGLI.structure.isMolecule()){c=MOWGLI.structure.fasta();new Modal({headerTitle:"FASTA Sequence",headerImage:"url('images/headprot.jpg')",body:"<pre>"+c+"</pre>"})}else MOWGLI.alert("No FASTA sequence is available for this structure");break;case"dblclick":}},this.element.addEventListener("click",this,!1),this.element.addEventListener("dblclick",this,!1)}a.Fasta=b}(this.mwGUI=this.mwGUI||{}),function(a){function b(a){this.element=document.getElementById(a),this.handleEvent=function(a){function b(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}switch(a.type){case"click":b()}},this.element.addEventListener("click",this,!1)}a.FullScreen=b}(this.mwGUI=this.mwGUI||{}),function(a){function b(a){this.element=document.getElementById(a),this.handleEvent=function(b){switch(console.log(a),b.type){case"click":if(MOWGLI.structure.isMolecule()){MOWGLI.structure.calcPhiPsi();var c=MOWGLI.structure.finder("ATOM",function(a){return"CA"===a.name?!0:void 0}),d=function(a){var b='<table id="tabphi" style="font-family: monospace">';b+="<tr><th>Chain</th><th>Group</th><th>GroupID</th><th>Phi</th><th>Psi</th></tr>";for(var d=0;d<c.length;d++)void 0===c[d].phi&&(c[d].phi="-"),void 0===c[d].psi&&(c[d].psi="-"),b+="<tr>",b+="<td>"+c[d].chain+"</td>",b+="<td>"+c[d].group+"</td>",b+="<td>"+c[d].groupID+"</td>",b+=isNaN(c[d].phi)?"<td>"+c[d].phi+"</td>":"<td>"+c[d].phi.toFixed(2)+"</td>",b+=isNaN(c[d].psi)?"<td>"+c[d].psi+"</td>":"<td>"+c[d].psi.toFixed(2)+"</td>",b+="</tr>";return b+="</table>"},e=d(c);new Modal({headerTitle:"Phi/Psi...",headerImage:"url('images/headprot.jpg')",body:e})}else MOWGLI.alert("No Phi/Psi angles are available for this structure");break;case"dblclick":}},this.element.addEventListener("click",this,!1),this.element.addEventListener("dblclick",this,!1)}a.Phipsi=b}(this.mwGUI=this.mwGUI||{}),function(a){function b(a){this.element=document.getElementById(a),this.handleEvent=function(b){function c(b){var c=new XMLHttpRequest;c.open("GET",b,!0),c.responseType="json",c.onreadystatechange=function(b){if(4==c.readyState)if(200==c.status){var d=c.response;MOWGLI.structure=new Molecule(d),MOWGLI.alert(a.toUpperCase()+" successfully loaded..."),console.log(MOWGLI.structure instanceof Molecule),MOWGLI.structure.calcPhiPsi()}else console.log("ERROR:: Can't load sample."+b.description+"\n")},c.send(null)}function d(b,c,d){console.log("Load Raster...");var e=document.createElement("canvas"),f=e.getContext("2d"),g=new Image;g.src=b,g.crossOrigin="*",g.onload=function(){e.style.display="none",e.width=this.width,e.height=this.height,f.drawImage(g,0,0,this.width,this.height);var b,h=f.getImageData(0,0,this.width,this.height).data;if("8-bit"===c){b=new Uint8ClampedArray(h.length/4);for(var i=0,j=0;i<h.length;i+=4,j++)b[j]=h[i]}else{b=new Uint32Array(h.length/4);for(var i=0,j=0;i<h.length;i+=4,j++)b[j]=h[i]<<24|h[i+1]<<16|h[i+2]<<8|h[i+3]}MOWGLI.structure=new Raster({ID:d,title:d,mode:c,width:this.width,height:this.width,depth:this.height/this.width,data:b}),MOWGLI.alert(a.toUpperCase()+" successfully loaded...")}}switch(b.type){case"click":console.log("Load Sample..."+a);var e="samples/1ZNI.json";switch(a){case"1zni":e="samples/1ZNI.json",c(e);break;case"1hho":e="samples/1HHO.json",c(e);break;case"3cro":e="samples/3CRO.json",c(e);break;case"toricSolenoid.png":e="samples/toricSolenoid_vertical_128x128x86.png",d(e,"8-bit","toricSolenoid")}}},this.element.addEventListener("click",this,!1)}a.Sample=b}(this.mwGUI=this.mwGUI||{}),function(a){function b(a){this.element=document.getElementById(a),this.handleEvent=function(b){switch(console.log(a),b.type){case"click":MOWGLI.alert("Not implemented. Sorry for the inconvenience")}},this.element.addEventListener("click",this,!1)}a.SaveAs=b}(this.mwGUI=this.mwGUI||{}),function(a){function b(a){this.element=document.getElementById(a),this.handleEvent=function(b){switch(console.log(a),b.type){case"click":var c;if(MOWGLI.structure.isMolecule()){c=MOWGLI.structure.secondary(),console.log(c);new Modal({headerTitle:"Secondary Structure",headerImage:"url('images/headprot.jpg')",body:"<pre>"+c+"</pre>"})}else MOWGLI.alert("No Secondary structure sequence is available for this structure");break;case"dblclick":}},this.element.addEventListener("click",this,!1),this.element.addEventListener("dblclick",this,!1)}a.SecStruct=b}(this.mwGUI=this.mwGUI||{});